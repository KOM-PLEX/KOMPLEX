{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 5, "column": 0}, "map": {"version":3,"sources":["file:///Users/raksa/School/Year-2/Next-Gen/KOMPLEX/apps/web/src/components/common/Carousel.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect, useRef, useCallback } from 'react';\nimport { ChevronLeft, ChevronRight, Play, Pause, Volume2, VolumeX } from 'lucide-react';\nimport { Media } from '@core-types/content/media';\n\n\ninterface CarouselProps {\n    media: Media[];\n    autoPlay?: boolean;\n    showControls?: boolean;\n}\n\nexport default function Carousel({\n    media,\n    autoPlay = false,\n    showControls = true\n}: CarouselProps) {\n    const [currentIndex, setCurrentIndex] = useState(0);\n    const [isPlaying, setIsPlaying] = useState(false);\n    const [isMuted, setIsMuted] = useState(false);\n    const videoRefs = useRef<HTMLVideoElement[]>([]);\n\n    useEffect(() => {\n        setCurrentIndex(0);\n        setIsPlaying(false);\n    }, [media.length]);\n\n    useEffect(() => {\n        if (autoPlay && media[currentIndex]?.type === 'video') {\n            setIsPlaying(true);\n        }\n    }, [currentIndex, autoPlay, media]);\n\n    const goToNext = useCallback((e?: React.MouseEvent<HTMLButtonElement>) => {\n        if (e) {\n            e.stopPropagation();\n            e.preventDefault();\n        }\n        if (currentIndex < media.length - 1) {\n            setCurrentIndex((prev) => (prev + 1));\n        } else {\n            setCurrentIndex(0);\n        }\n    }, [currentIndex, media.length]);\n\n    const goToPrevious = useCallback((e?: React.MouseEvent<HTMLButtonElement>) => {\n        if (e) {\n            e.preventDefault();\n            e.stopPropagation();\n        }\n        if (currentIndex > 0) {\n            setCurrentIndex((prev) => (prev - 1));\n        } else {\n            setCurrentIndex(media.length - 1);\n        }\n    }, [currentIndex, media.length]);\n\n    const handleVideoRef = useCallback((el: HTMLVideoElement | null, index: number) => {\n        if (el) {\n            videoRefs.current[index] = el;\n        }\n    }, []);\n\n    const togglePlayPause = useCallback(() => {\n        const currentVideo = videoRefs.current[currentIndex];\n        if (currentVideo && media[currentIndex]?.type === 'video') {\n            if (isPlaying) {\n                currentVideo.pause();\n                setIsPlaying(false);\n            } else {\n                currentVideo.play();\n                setIsPlaying(true);\n            }\n        }\n    }, [currentIndex, media, isPlaying]);\n\n    const toggleMute = () => {\n        const currentVideo = videoRefs.current[currentIndex];\n        if (currentVideo && media[currentIndex]?.type === 'video') {\n            currentVideo.muted = !isMuted;\n            setIsMuted(!isMuted);\n        }\n    };\n\n    const handleVideoEnded = () => {\n        if (autoPlay) {\n            goToNext();\n        } else {\n            setIsPlaying(false);\n        }\n    };\n\n    // Keyboard navigation\n    useEffect(() => {\n        const handleKeyDown = (e: KeyboardEvent) => {\n            if (e.key === 'ArrowLeft') {\n                goToPrevious();\n            } else if (e.key === 'ArrowRight') {\n                goToNext();\n            } else if (e.key === ' ' && media[currentIndex]?.type === 'video') {\n                e.preventDefault();\n                togglePlayPause();\n            }\n        };\n\n        window.addEventListener('keydown', handleKeyDown);\n        return () => window.removeEventListener('keydown', handleKeyDown);\n    }, [goToNext, goToPrevious, currentIndex, media, togglePlayPause]);\n\n    if (!media || media.length === 0) {\n        return (\n            <div className=\"w-full h-64 bg-gray-200 rounded-lg flex items-center justify-center\">\n                <p className=\"text-gray-500\">No media available</p>\n            </div>\n        );\n    }\n\n    return (\n        <div className=\"relative w-full overflow-hidden rounded-lg\">\n            {/* Carousel Container */}\n            <div className=\"relative w-full h-full\">\n                {/* Media Container */}\n                <div\n                    className=\"flex transition-transform duration-300 ease-out\"\n                    style={{\n                        width: `${media.length * 100}%`\n                    }}\n                >\n                    {media.map((item, index) => (\n                        <div\n                            key={index}\n                            className=\"w-full h-full flex-shrink-0\"\n                            style={{ width: `${100 / media.length}%`, transform: `translateX(-${currentIndex * 100}%)` }}\n                        >\n                            {item.type === 'image' ? (\n                                <img\n                                    src={item.url}\n                                    alt={`Slide ${index + 1}`}\n                                    className=\"w-full h-full object-cover aspect-video\"\n                                    draggable={false}\n                                    onError={(e) => {\n                                        e.currentTarget.src = \"/image-error.png\";\n                                    }}\n                                />\n                            ) : (\n                                <video\n                                    ref={(el) => handleVideoRef(el, index)}\n                                    src={item.url}\n                                    className=\"w-full h-full object-cover aspect-video\"\n                                    onEnded={handleVideoEnded}\n                                    onPlay={() => setIsPlaying(true)}\n                                    onPause={() => setIsPlaying(false)}\n                                    muted={isMuted}\n                                    loop={!autoPlay}\n                                    playsInline\n                                />\n                            )}\n                        </div>\n                    ))}\n                </div>\n            </div>\n\n            {/* Video Controls */}\n            {showControls && media[currentIndex]?.type === 'video' && (\n                <div className=\"absolute bottom-4 left-1/2 transform -translate-x-1/2 flex items-center gap-2 bg-black/50 backdrop-blur-sm rounded-full px-4 py-2 z-20\">\n                    <button\n                        onClick={togglePlayPause}\n                        className=\"text-white hover:text-gray-200 transition-colors\"\n                        aria-label={isPlaying ? 'Pause' : 'Play'}\n                    >\n                        {isPlaying ? <Pause className=\"w-5 h-5\" /> : <Play className=\"w-5 h-5\" />}\n                    </button>\n                    <button\n                        onClick={toggleMute}\n                        className=\"text-white hover:text-gray-200 transition-colors\"\n                        aria-label={isMuted ? 'Unmute' : 'Mute'}\n                    >\n                        {isMuted ? <VolumeX className=\"w-5 h-5\" /> : <Volume2 className=\"w-5 h-5\" />}\n                    </button>\n                </div>\n            )}\n\n            {/* Navigation Arrows */}\n            {media.length > 1 && (\n                <>\n                    <button\n                        onClick={goToPrevious}\n                        className=\"absolute left-0 top-1/2 -translate-y-1/2 w-10 h-10 bg-black/30 hover:bg-black/50 flex items-center justify-center transition-all duration-200 hover:scale-110 z-10 rounded-r-lg\"\n                        aria-label=\"Previous slide\"\n                    >\n                        <ChevronLeft className=\"w-5 h-5 text-white\" />\n                    </button>\n                    <button\n                        onClick={goToNext}\n                        className=\"absolute right-0 top-1/2 -translate-y-1/2 w-10 h-10 bg-black/30 hover:bg-black/50 flex items-center justify-center transition-all duration-200 hover:scale-110 z-10 rounded-l-lg\"\n                        aria-label=\"Next slide\"\n                    >\n                        <ChevronRight className=\"w-5 h-5 text-white\" />\n                    </button>\n                </>\n            )}\n\n            {/* Media Counter */}\n            {media.length > 1 && (\n                <div className=\"absolute top-4 right-4 bg-black/50 text-white px-3 py-1 rounded-full text-sm font-medium backdrop-blur-sm z-10\">\n                    {currentIndex + 1} / {media.length}\n                </div>\n            )}\n        </div>\n    );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 311, "column": 0}, "map": {"version":3,"sources":["file:///Users/raksa/School/Year-2/Next-Gen/KOMPLEX/packages/services/me/forums.ts"],"sourcesContent":["import { ForumPost } from \"../../types/content/forums\";\nimport api from \"../../config/axios\";\n\n// Create a new forum post\nexport const createForum = async (formData: FormData): Promise<ForumPost> => {\n  try {\n    const response = await api.post(`/me/forums`, formData, {\n      headers: { \"Content-Type\": \"multipart/form-data\" },\n    });\n    return response.data.data;\n  } catch (error) {\n    console.error(\"Error creating forum:\", error);\n    throw new Error(\"Failed to create forum post\");\n  }\n};\n\n// Update a forum post\nexport const updateForum = async (\n  id: string,\n  forumData: FormData\n): Promise<ForumPost> => {\n  try {\n    const response = await api.put(`/me/forums/${id}`, forumData);\n    return response.data.data;\n  } catch (error) {\n    console.error(\"Error updating forum:\", error);\n    throw new Error(\"Failed to update forum post\");\n  }\n};\n\n// Delete a forum post\nexport const deleteForum = async (id: string): Promise<void> => {\n  try {\n    await api.delete(`/me/forums/${id}`);\n  } catch (error) {\n    console.error(\"Error deleting forum:\", error);\n    throw new Error(\"Failed to delete forum post\");\n  }\n};\n\n// Like/unlike a forum post\nexport const toggleForumLike = async (\n  id: string,\n  isLiked: boolean\n): Promise<void> => {\n  try {\n    const endpoint = isLiked ? \"unlike\" : \"like\";\n    await api.patch(`/me/forums/${id}/${endpoint}`);\n  } catch (error) {\n    console.error(\"Error toggling forum like:\", error);\n    throw new Error(\"Failed to update forum like status\");\n  }\n};\n\n// Get user's own forum posts\nexport const getUserForums = async (): Promise<ForumPost[]> => {\n  try {\n    const response = await api.get(`/me/forums`);\n    return response.data.data;\n  } catch (error) {\n    console.error(\"Error fetching user forums:\", error);\n    throw new Error(\"Failed to fetch user forums\");\n  }\n};\n\n// Get user's own forum post by ID\nexport const getUserForumById = async (id: string): Promise<ForumPost> => {\n  try {\n    const response = await api.get(`/me/forums/${id}`);\n    return response.data.data;\n  } catch (error) {\n    console.error(\"Error fetching user forum:\", error);\n    throw new Error(\"Failed to fetch user forum\");\n  }\n};\n"],"names":[],"mappings":";;;;;;;;AACA;;AAGO,MAAM,cAAc,OAAO;IAChC,IAAI;QACF,MAAM,WAAW,MAAM,2HAAA,CAAA,UAAG,CAAC,IAAI,CAAC,CAAC,UAAU,CAAC,EAAE,UAAU;YACtD,SAAS;gBAAE,gBAAgB;YAAsB;QACnD;QACA,OAAO,SAAS,IAAI,CAAC,IAAI;IAC3B,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,yBAAyB;QACvC,MAAM,IAAI,MAAM;IAClB;AACF;AAGO,MAAM,cAAc,OACzB,IACA;IAEA,IAAI;QACF,MAAM,WAAW,MAAM,2HAAA,CAAA,UAAG,CAAC,GAAG,CAAC,CAAC,WAAW,EAAE,IAAI,EAAE;QACnD,OAAO,SAAS,IAAI,CAAC,IAAI;IAC3B,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,yBAAyB;QACvC,MAAM,IAAI,MAAM;IAClB;AACF;AAGO,MAAM,cAAc,OAAO;IAChC,IAAI;QACF,MAAM,2HAAA,CAAA,UAAG,CAAC,MAAM,CAAC,CAAC,WAAW,EAAE,IAAI;IACrC,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,yBAAyB;QACvC,MAAM,IAAI,MAAM;IAClB;AACF;AAGO,MAAM,kBAAkB,OAC7B,IACA;IAEA,IAAI;QACF,MAAM,WAAW,UAAU,WAAW;QACtC,MAAM,2HAAA,CAAA,UAAG,CAAC,KAAK,CAAC,CAAC,WAAW,EAAE,GAAG,CAAC,EAAE,UAAU;IAChD,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,8BAA8B;QAC5C,MAAM,IAAI,MAAM;IAClB;AACF;AAGO,MAAM,gBAAgB;IAC3B,IAAI;QACF,MAAM,WAAW,MAAM,2HAAA,CAAA,UAAG,CAAC,GAAG,CAAC,CAAC,UAAU,CAAC;QAC3C,OAAO,SAAS,IAAI,CAAC,IAAI;IAC3B,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,+BAA+B;QAC7C,MAAM,IAAI,MAAM;IAClB;AACF;AAGO,MAAM,mBAAmB,OAAO;IACrC,IAAI;QACF,MAAM,WAAW,MAAM,2HAAA,CAAA,UAAG,CAAC,GAAG,CAAC,CAAC,WAAW,EAAE,IAAI;QACjD,OAAO,SAAS,IAAI,CAAC,IAAI;IAC3B,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,8BAA8B;QAC5C,MAAM,IAAI,MAAM;IAClB;AACF","debugId":null}},
    {"offset": {"line": 382, "column": 0}, "map": {"version":3,"sources":["file:///Users/raksa/School/Year-2/Next-Gen/KOMPLEX/packages/services/me/follow.ts"],"sourcesContent":["import api from \"../../config/axios\";\n\nexport const followUser = async (userId: number): Promise<void> => {\n  const response = await api.post(`/me/follow/follow/${userId}`);\n  return response.data;\n};\n\nexport const unfollowUser = async (userId: number): Promise<void> => {\n  const response = await api.post(`/me/follow/unfollow/${userId}`);\n  return response.data;\n};\n"],"names":[],"mappings":";;;;AAAA;;AAEO,MAAM,aAAa,OAAO;IAC/B,MAAM,WAAW,MAAM,2HAAA,CAAA,UAAG,CAAC,IAAI,CAAC,CAAC,kBAAkB,EAAE,QAAQ;IAC7D,OAAO,SAAS,IAAI;AACtB;AAEO,MAAM,eAAe,OAAO;IACjC,MAAM,WAAW,MAAM,2HAAA,CAAA,UAAG,CAAC,IAAI,CAAC,CAAC,oBAAoB,EAAE,QAAQ;IAC/D,OAAO,SAAS,IAAI;AACtB","debugId":null}},
    {"offset": {"line": 448, "column": 0}, "map": {"version":3,"sources":["file:///Users/raksa/School/Year-2/Next-Gen/KOMPLEX/apps/web/src/components/helper/MarkDownRenderer.tsx"],"sourcesContent":["import ReactMarkdown from \"react-markdown\";\nimport remarkBreaks from \"remark-breaks\";\nimport remarkMath from \"remark-math\";\nimport rehypeKatex from \"rehype-katex\";\nimport rehypeRaw from \"rehype-raw\";\nimport rehypeHighlight from \"rehype-highlight\";\nimport \"katex/dist/katex.min.css\"; // important for math styling\nimport \"highlight.js/styles/github.css\"; // optional, pick your favorite highlight style\n\n\ninterface Props {\n    content: string;\n}\n\nconst MarkdownRenderer: React.FC<Props> = ({ content }) => {\n    return (\n        <div className=\"prose prose-2xl max-w-none\">\n            <ReactMarkdown\n                remarkPlugins={[remarkMath, remarkBreaks]}\n                rehypePlugins={[rehypeKatex, rehypeHighlight, rehypeRaw]}\n            >\n                {content}\n            </ReactMarkdown>\n        </div>\n    );\n};\n\nexport default MarkdownRenderer;\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;AASA,MAAM,mBAAoC,CAAC,EAAE,OAAO,EAAE;IAClD,qBACI,6WAAC;QAAI,WAAU;kBACX,cAAA,6WAAC,iTAAA,CAAA,UAAa;YACV,eAAe;gBAAC,yMAAA,CAAA,UAAU;gBAAE,6MAAA,CAAA,UAAY;aAAC;YACzC,eAAe;gBAAC,2MAAA,CAAA,UAAW;gBAAE,mNAAA,CAAA,UAAe;gBAAE,uMAAA,CAAA,UAAS;aAAC;sBAEvD;;;;;;;;;;;AAIjB;uCAEe","debugId":null}},
    {"offset": {"line": 497, "column": 0}, "map": {"version":3,"sources":["file:///Users/raksa/School/Year-2/Next-Gen/KOMPLEX/apps/web/src/components/pages/forums/ForumCard.tsx"],"sourcesContent":["'use client';\n\nimport { MessageCircle, Share, ThumbsUp, Check, LinkIcon, UserPlus, UserCheck } from 'lucide-react';\nimport Link from 'next/link';\nimport { useState } from 'react';\nimport { useRouter } from 'next/navigation';\nimport { Menu, Transition } from '@headlessui/react';\nimport Carousel from '@components/common/Carousel';\nimport { ForumPost } from '@core-types/content/forums';\nimport { Media } from '@core-types/content/media';\nimport { toggleForumLike } from '@core-services/me/forums';\nimport { followUser, unfollowUser } from '@core-services/me/follow';\nimport { useAuth } from '@hooks/useAuth';\nimport MarkDownRenderer from '@components/helper/MarkDownRenderer';\n\n\ninterface ForumCardProps {\n    isFromBasePage: boolean;\n    post: ForumPost;\n    onCommentClick?: () => void;\n    onLikeClick?: () => void;\n}\n\nexport default function ForumCard({ isFromBasePage, post, onCommentClick, onLikeClick }: ForumCardProps) {\n    const [upvoted, setUpvoted] = useState(post.isLiked);\n    const [upvoteCount, setUpvoteCount] = useState(post.likeCount);\n    const [copied, setCopied] = useState(false);\n    const [isFollowing, setIsFollowing] = useState(post.isFollowing);\n    const [isFollowLoading, setIsFollowLoading] = useState(false);\n    const router = useRouter();\n    const { user, openLoginModal } = useAuth();\n\n    // Helper functions to format backend data\n    const getTimeAgo = (dateString: string): string => {\n        const date = new Date(dateString);\n        const now = new Date();\n        const diffMs = now.getTime() - date.getTime();\n        const diffHours = Math.floor(diffMs / (1000 * 60 * 60));\n        const diffDays = Math.floor(diffHours / 24);\n\n        if (diffDays > 0) {\n            return `មុន ${diffDays} ថ្ងៃ`;\n        } else if (diffHours > 0) {\n            return `មុន ${diffHours} ម៉ោង`;\n        } else {\n            return 'ថ្មីៗនេះ';\n        }\n    };\n\n    const getAvatar = (username: string): string => {\n        return username.charAt(0);\n    };\n\n    const getImageUrls = (media: Media[]): string[] => {\n        return media.filter(m => m.type === 'image').map(m => m.url);\n    };\n    const handleUpvote = async (e: React.MouseEvent) => {\n        e.stopPropagation();\n        if (!user) {\n            openLoginModal();\n            return;\n        }\n        try {\n            // Update UI optimistically\n            if (upvoted) {\n                setUpvoteCount(upvoteCount - 1);\n            } else {\n                setUpvoteCount(upvoteCount + 1);\n            }\n            setUpvoted(!upvoted);\n\n            // Call the service\n            await toggleForumLike(post.id.toString(), upvoted);\n\n            // Call parent callback if provided\n            if (onLikeClick) {\n                onLikeClick();\n            }\n        } catch (error) {\n            // Revert UI changes on error\n            if (upvoted) {\n                setUpvoteCount(upvoteCount + 1);\n            } else {\n                setUpvoteCount(upvoteCount - 1);\n            }\n            setUpvoted(upvoted);\n            console.error('Error toggling like:', error);\n        }\n    };\n\n    const handleCommentClick = (e: React.MouseEvent) => {\n        e.stopPropagation();\n        if (onCommentClick) {\n            onCommentClick();\n        }\n    };\n\n    const handleCopyLink = async (e: React.MouseEvent) => {\n        e.stopPropagation();\n        try {\n            const url = `${window.location.origin}/forums/${post.id}`;\n            await navigator.clipboard.writeText(url);\n            setCopied(true);\n            setTimeout(() => setCopied(false), 2000);\n        } catch (error) {\n            console.error('Failed to copy link:', error);\n        }\n    };\n\n    const handleFollow = async (e: React.MouseEvent) => {\n        e.stopPropagation();\n\n        if (!user) {\n            openLoginModal();\n            return;\n        }\n\n        // Don't allow following yourself\n        if (user.id === post.userId) {\n            return;\n        }\n\n        try {\n            setIsFollowLoading(true);\n\n            if (isFollowing) {\n                await unfollowUser(post.userId);\n                setIsFollowing(false);\n            } else {\n                await followUser(post.userId);\n                setIsFollowing(true);\n            }\n        } catch (error) {\n            console.error('Error toggling follow:', error);\n        } finally {\n            setIsFollowLoading(false);\n        }\n    };\n\n    const handleCardClick = () => {\n        if (isFromBasePage) {\n            router.push(`/forums/${post.id}`);\n        }\n    }\n\n    return (\n        <div className={`bg-white rounded-2xl p-6  border border-indigo-500/10 transition-all duration-300   ${isFromBasePage ? 'cursor-pointer' : ''}`} onClick={handleCardClick}>\n            <div className=\"flex items-center gap-3 mb-4\">\n                <Link href={`/users/${post.userId}`} className=\"flex items-center gap-3 hover:opacity-80 transition-opacity\">\n                    {post.profileImage ? (\n                        <img\n                            src={post.profileImage}\n                            alt={post.username}\n                            className=\"w-10 h-10 rounded-full object-cover border-2 border-indigo-500\"\n                            onError={(e) => {\n                                e.currentTarget.style.display = 'none';\n                                e.currentTarget.nextElementSibling?.classList.remove('hidden');\n                            }}\n                        />\n                    ) : null}\n                    <div className={`w-10 h-10 rounded-full bg-indigo-600 flex items-center justify-center text-white font-semibold text-base ${post.profileImage ? 'hidden' : ''}`}>\n                        {getAvatar(post.username)}\n                    </div>\n                    <div className=\"flex-1\">\n                        <div className=\"font-semibold text-gray-900 text-sm mb-0.5 hover:underline\">\n                            {post.username}\n                        </div>\n                        <div className=\"text-gray-500 text-xs\">\n                            {getTimeAgo(post.createdAt)}\n                        </div>\n                    </div>\n                </Link>\n\n                {/* Follow Button - Only show if not from base page and not current user's post */}\n                {!isFromBasePage && user && user.id !== post.userId && (\n                    <button\n                        onClick={handleFollow}\n                        disabled={isFollowLoading}\n                        className={`flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium rounded-lg transition-colors ${isFollowing\n                            ? 'bg-indigo-100 text-indigo-700 border border-indigo-200 hover:bg-indigo-200'\n                            : 'bg-indigo-600 text-white hover:bg-indigo-700'\n                            } ${isFollowLoading ? 'opacity-50 cursor-not-allowed' : ''}`}\n                    >\n                        {isFollowLoading ? (\n                            <div className=\"w-3 h-3 border border-current border-t-transparent rounded-full animate-spin\" />\n                        ) : isFollowing ? (\n                            <>\n                                <UserCheck className=\"w-3 h-3\" />\n                                បានតាមដាន\n                            </>\n                        ) : (\n                            <>\n                                <UserPlus className=\"w-3 h-3\" />\n                                តាមដាន\n                            </>\n                        )}\n                    </button>\n                )}\n            </div>\n\n            <div className=\"text-lg font-bold text-gray-900 mb-2.5 leading-relaxed\">\n                {post.title}\n            </div>\n\n            <div className=\"text-gray-700 text-sm leading-relaxed mb-4\">\n                <MarkDownRenderer content={post.description} />\n            </div>\n\n            {post.media && post.media.length > 0 && (\n                <Carousel media={getImageUrls(post.media).map(url => ({ url, type: 'image' }))} />\n            )}\n\n            <div className=\"flex items-center gap-5 pt-4 border-t border-indigo-500/10\">\n                <button\n                    onClick={handleUpvote}\n                    className={`flex items-center gap-1.5 text-indigo-500 text-sm font-medium cursor-pointer transition-all duration-200 py-1.5 px-3 rounded-lg border-none bg-none hover:text-indigo-600 hover:bg-indigo-50/60 ${upvoted ? 'text-indigo-600 bg-indigo-50/80' : ''}`}\n                >\n                    <ThumbsUp className={`w-4 h-4 ${upvoted ? 'fill-indigo-600' : ''}`} /> <span className=\"font-semibold text-gray-500\">{upvoteCount}</span>\n                </button>\n                {\n                    isFromBasePage ? (\n                        <Link href={`/forum/${post.id}`} className=\"flex items-center gap-1.5 text-indigo-500 text-sm font-medium cursor-pointer transition-all duration-200 py-1.5 px-3 rounded-lg border-none bg-none hover:text-indigo-600 hover:bg-indigo-50/60\">\n                            <MessageCircle className=\"w-4 h-4\" /> <span className=\"text-gray-500\">ឆ្លើយតប </span>\n                        </Link>\n                    ) : (\n                        <button onClick={handleCommentClick} className=\"flex items-center gap-1.5 text-indigo-500 text-sm font-medium cursor-pointer transition-all duration-200 py-1.5 px-3 rounded-lg border-none bg-none hover:text-indigo-600 hover:bg-indigo-50/60\">\n                            <MessageCircle className=\"w-4 h-4\" /> <span className=\"text-gray-500\">ឆ្លើយតប </span>\n                        </button>\n                    )\n                }\n\n                <Menu as=\"div\" className=\"relative\">\n                    <Menu.Button\n                        onClick={(e) => e.stopPropagation()}\n                        className=\"flex items-center gap-1.5 text-indigo-500 text-sm font-medium cursor-pointer transition-all duration-200 py-1.5 px-3 rounded-lg border-none bg-none hover:text-indigo-600 hover:bg-indigo-50/60 focus:outline-none\"\n                    >\n                        <Share className=\"w-4 h-4\" />\n                        <span className=\"text-gray-500\">ចែករំលែក</span>\n                    </Menu.Button>\n\n                    <Transition\n                        enter=\"transition duration-100 ease-out\"\n                        enterFrom=\"transform scale-95 opacity-0\"\n                        enterTo=\"transform scale-100 opacity-100\"\n                        leave=\"transition duration-75 ease-out\"\n                        leaveFrom=\"transform scale-100 opacity-100\"\n                        leaveTo=\"transform scale-95 opacity-0\"\n                    >\n                        <Menu.Items className=\"absolute left-0  w-48 bg-white rounded-lg border border-gray-200 shadow-lg z-50 focus:outline-none\">\n                            <Menu.Item>\n                                {({ active }) => (\n                                    <button\n                                        onClick={handleCopyLink}\n                                        className={`w-full flex items-center gap-3 px-4 py-3 text-sm transition-colors ${active ? 'bg-indigo-50 text-indigo-600' : 'text-gray-700'\n                                            }`}\n                                    >\n                                        {copied ? (\n                                            <>\n                                                <Check className=\"w-4 h-4 text-green-500\" />\n                                                <span>បានចម្លង!</span>\n                                            </>\n                                        ) : (\n                                            <>\n                                                <LinkIcon className=\"w-4 h-4\" />\n                                                <span>ចម្លងតំណ</span>\n                                            </>\n                                        )}\n                                    </button>\n                                )}\n                            </Menu.Item>\n                        </Menu.Items>\n                    </Transition>\n                </Menu>\n            </div>\n        </div>\n    );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 976, "column": 0}, "map": {"version":3,"sources":["file:///Users/raksa/School/Year-2/Next-Gen/KOMPLEX/apps/web/src/components/pages/forums/ForumSkeleton.tsx"],"sourcesContent":["interface ForumSkeletonProps {\n    count: number;\n}\n\nexport default function ForumSkeleton({ count }: ForumSkeletonProps) {\n    return (\n        <div className=\"space-y-5\">\n            {[...Array(count)].map((_, index) => (\n                <div key={index} className=\"bg-white rounded-xl p-6 shadow-sm border border-gray-200 animate-pulse\">\n                    <div className=\"flex items-start gap-4\">\n                        <div className=\"w-12 h-12 bg-gray-300 rounded-full\"></div>\n                        <div className=\"flex-1\">\n                            <div className=\"flex items-center gap-2 mb-2\">\n                                <div className=\"h-4 bg-gray-300 rounded w-24\"></div>\n                                <div className=\"h-3 bg-gray-200 rounded w-16\"></div>\n                            </div>\n                            <div className=\"h-6 bg-gray-300 rounded w-3/4 mb-3\"></div>\n                            <div className=\"space-y-2\">\n                                <div className=\"h-4 bg-gray-200 rounded w-full\"></div>\n                                <div className=\"h-4 bg-gray-200 rounded w-2/3\"></div>\n                            </div>\n                            <div className=\"bg-gray-200 rounded w-full h-96 my-4\"></div>\n                            <div className=\"flex items-center gap-4 mt-4\">\n                                <div className=\"h-4 bg-gray-200 rounded w-16\"></div>\n                                <div className=\"h-4 bg-gray-200 rounded w-16\"></div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            ))}\n        </div>\n    );\n}\n"],"names":[],"mappings":";;;;;AAIe,SAAS,cAAc,EAAE,KAAK,EAAsB;IAC/D,qBACI,6WAAC;QAAI,WAAU;kBACV;eAAI,MAAM;SAAO,CAAC,GAAG,CAAC,CAAC,GAAG,sBACvB,6WAAC;gBAAgB,WAAU;0BACvB,cAAA,6WAAC;oBAAI,WAAU;;sCACX,6WAAC;4BAAI,WAAU;;;;;;sCACf,6WAAC;4BAAI,WAAU;;8CACX,6WAAC;oCAAI,WAAU;;sDACX,6WAAC;4CAAI,WAAU;;;;;;sDACf,6WAAC;4CAAI,WAAU;;;;;;;;;;;;8CAEnB,6WAAC;oCAAI,WAAU;;;;;;8CACf,6WAAC;oCAAI,WAAU;;sDACX,6WAAC;4CAAI,WAAU;;;;;;sDACf,6WAAC;4CAAI,WAAU;;;;;;;;;;;;8CAEnB,6WAAC;oCAAI,WAAU;;;;;;8CACf,6WAAC;oCAAI,WAAU;;sDACX,6WAAC;4CAAI,WAAU;;;;;;sDACf,6WAAC;4CAAI,WAAU;;;;;;;;;;;;;;;;;;;;;;;;eAhBrB;;;;;;;;;;AAwB1B","debugId":null}},
    {"offset": {"line": 1111, "column": 0}, "map": {"version":3,"sources":["file:///Users/raksa/School/Year-2/Next-Gen/KOMPLEX/apps/web/src/components/common/ContentError.tsx"],"sourcesContent":["import { Book, AlertCircle, RefreshCw } from 'lucide-react';\n\ninterface ContentErrorProps {\n    type: 'error' | 'no-results';\n    message?: string;\n}\n\nexport default function ContentError({ type, message }: ContentErrorProps) {\n\n    const handleRetry = async () => {\n        window.location.reload();\n    };\n\n    const isError = type === 'error';\n\n    return (\n        <div className=\"text-center py-12\">\n            {isError ? (\n                <AlertCircle className=\"w-16 h-16 text-red-400 mx-auto mb-4\" />\n            ) : (\n                <Book className=\"w-16 h-16 text-gray-400 mx-auto mb-4\" />\n            )}\n            <h3 className=\"text-lg font-medium text-gray-900 mb-2\">\n                {message ||\n                    (isError\n                        ? 'មានបញ្ហាក្នុងការទាញយកប្លុក'\n                        : 'រកមិនឃើញប្លុក')}\n            </h3>\n           \n            <button\n                onClick={handleRetry}\n                className=\"inline-flex items-center gap-2 px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-xl font-medium transition-colors\"\n            >\n                <RefreshCw className=\"w-4 h-4\" />\n                ព្យាយាមម្តងទៀត\n            </button>\n        </div>\n    );\n}\n"],"names":[],"mappings":";;;;AAAA;AAAA;AAAA;;;AAOe,SAAS,aAAa,EAAE,IAAI,EAAE,OAAO,EAAqB;IAErE,MAAM,cAAc;QAChB,OAAO,QAAQ,CAAC,MAAM;IAC1B;IAEA,MAAM,UAAU,SAAS;IAEzB,qBACI,6WAAC;QAAI,WAAU;;YACV,wBACG,6WAAC,wSAAA,CAAA,cAAW;gBAAC,WAAU;;;;;qCAEvB,6WAAC,sRAAA,CAAA,OAAI;gBAAC,WAAU;;;;;;0BAEpB,6WAAC;gBAAG,WAAU;0BACT,WACG,CAAC,UACK,+BACA,eAAe;;;;;;0BAG7B,6WAAC;gBACG,SAAS;gBACT,WAAU;;kCAEV,6WAAC,oSAAA,CAAA,YAAS;wBAAC,WAAU;;;;;;oBAAY;;;;;;;;;;;;;AAKjD","debugId":null}},
    {"offset": {"line": 1178, "column": 0}, "map": {"version":3,"sources":["file:///Users/raksa/School/Year-2/Next-Gen/KOMPLEX/packages/services/feed/forums.ts"],"sourcesContent":["import { ForumPost } from \"../../types/content/forums\";\nimport api from \"../../config/axios\";\n\n// Get all forum posts\nexport const getAllForums = async (): Promise<{\n    forums: ForumPost[];\n    hasMore: boolean;\n  }> => {\n    try {\n      const response = await api.get(`/feed/forums`);\n      return {\n        forums: response.data.data,\n        hasMore: response.data.hasMore || false,\n      };\n    } catch (error) {\n      console.error(\"Error fetching all forums:\", error);\n      throw new Error(\"Failed to fetch forum posts\");\n    }\n  };\n  \n  // Get a single forum post by ID\n  export const getForumById = async (id: string): Promise<ForumPost> => {\n    try {\n      const response = await api.get(`/feed/forums/${id}`);\n      return response.data.data;\n    } catch (error) {\n      console.error(\"Error fetching forum post:\", error);\n      throw new Error(\"Failed to fetch forum post\");\n    }\n  };"],"names":[],"mappings":";;;;AACA;;AAGO,MAAM,eAAe;IAIxB,IAAI;QACF,MAAM,WAAW,MAAM,2HAAA,CAAA,UAAG,CAAC,GAAG,CAAC,CAAC,YAAY,CAAC;QAC7C,OAAO;YACL,QAAQ,SAAS,IAAI,CAAC,IAAI;YAC1B,SAAS,SAAS,IAAI,CAAC,OAAO,IAAI;QACpC;IACF,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,8BAA8B;QAC5C,MAAM,IAAI,MAAM;IAClB;AACF;AAGO,MAAM,eAAe,OAAO;IACjC,IAAI;QACF,MAAM,WAAW,MAAM,2HAAA,CAAA,UAAG,CAAC,GAAG,CAAC,CAAC,aAAa,EAAE,IAAI;QACnD,OAAO,SAAS,IAAI,CAAC,IAAI;IAC3B,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,8BAA8B;QAC5C,MAAM,IAAI,MAAM;IAClB;AACF","debugId":null}},
    {"offset": {"line": 1209, "column": 0}, "map": {"version":3,"sources":["file:///Users/raksa/School/Year-2/Next-Gen/KOMPLEX/packages/services/feed/search/forums.ts"],"sourcesContent":["import api from \"../../../config/axios\";\n\nexport const searchForums = async (query: string, limit: number = 10, offset: number = 0) => {\n\tconst response = await api.get(`/search/forums`, {\n\t\tparams: {\n\t\t\tquery,\n\t\t\tlimit,\n\t\t\toffset,\n\t\t},\n\t});\n\treturn { data: response.data.data, isMatch: response.data.isMatch };\n};\n\n// export const searchForumsService = async (\n//   query: string,\n//   limit: number,\n//   offset: number,\n//   userId: number\n// ) => {\n//   try {\n//     const searchResults = await meilisearch.index(\"forums\").search(query, {\n//       limit,\n//       offset,\n//     });\n//     const idsFromSearch = searchResults.hits.map((hit: any) => hit.id);\n//     const cachedResults = (await redis.mGet(\n//       idsFromSearch.map((id) => `forums:${id}`)\n//     )) as (string | null)[];\n\n//     const hits: any[] = [];\n//     const missedIds: number[] = [];\n\n//     if (cachedResults.length > 0) {\n//       cachedResults.forEach((item, idx) => {\n//         if (item) hits.push(JSON.parse(item));\n//         else missedIds.push(idsFromSearch[idx]);\n//       });\n//     }\n\n//     // 3️⃣ Fetch missing forums from DB\n//     let missedForums: any[] = [];\n//     if (missedIds.length > 0) {\n//       const forumRows = await db\n//         .select({\n//           id: forums.id,\n//           userId: forums.userId,\n//           title: forums.title,\n//           description: forums.description,\n//           type: forums.type,\n//           topic: forums.topic,\n//           createdAt: forums.createdAt,\n//           updatedAt: forums.updatedAt,\n//           mediaUrl: forumMedias.url,\n//           mediaType: forumMedias.mediaType,\n//           username: sql`${users.firstName} || ' ' || ${users.lastName}`,\n//           profileImage: users.profileImage,\n//         })\n//         .from(forums)\n//         .leftJoin(forumMedias, eq(forums.id, forumMedias.forumId))\n//         .leftJoin(users, eq(forums.userId, users.id))\n//         .where(inArray(forums.id, missedIds));\n\n//       const forumMap = new Map<number, any>();\n//       for (const forum of forumRows) {\n//         if (!forumMap.has(forum.id)) {\n//           const formatted = {\n//             id: forum.id,\n//             userId: forum.userId,\n//             title: forum.title,\n//             description: forum.description,\n//             type: forum.type,\n//             topic: forum.topic,\n//             createdAt: forum.createdAt,\n//             updatedAt: forum.updatedAt,\n//             username: forum.username,\n//             profileImage: forum.profileImage,\n//             media: [] as { url: string; type: string }[],\n//           };\n//           forumMap.set(forum.id, formatted);\n//           missedForums.push(formatted);\n//         }\n\n//         if (forum.mediaUrl) {\n//           forumMap.get(forum.id).media.push({\n//             url: forum.mediaUrl,\n//             type: forum.mediaType,\n//           });\n//         }\n//       }\n\n//       // Write missed forums to Redis\n//       for (const forum of missedForums) {\n//         await redis.set(`forums:${forum.id}`, JSON.stringify(forum), {\n//           EX: 600,\n//         });\n//       }\n//     }\n\n//     // 4️⃣ Merge hits and missed forums, preserving original order\n//     const allForumsMap = new Map<number, any>();\n//     for (const forum of [...hits, ...missedForums])\n//       allForumsMap.set(forum.id, forum);\n//     const allForums = idsFromSearch.map((f) => allForumsMap.get(f.id));\n\n//     // 5️⃣ Fetch dynamic fields fresh\n//     const dynamicData = await db\n//       .select({\n//         id: forums.id,\n//         viewCount: forums.viewCount,\n//         likeCount: sql`COUNT(DISTINCT ${forumLikes.id})`,\n//         isLiked: sql`CASE WHEN ${forumLikes.forumId} IS NOT NULL THEN true ELSE false END`,\n//       })\n//       .from(forums)\n//       .leftJoin(\n//         forumLikes,\n//         and(\n//           eq(forumLikes.forumId, forums.id),\n//           eq(forumLikes.userId, Number(userId))\n//         )\n//       )\n//       .where(\n//         inArray(\n//           forums.id,\n//           idsFromSearch.map((f) => f.id)\n//         )\n//       )\n//       .groupBy(forums.id, forumLikes.forumId);\n\n//     const forumsWithMedia = allForums.map((f) => {\n//       const dynamic = dynamicData.find((d) => d.id === f.id);\n//       return {\n//         ...f,\n//         viewCount: (dynamic?.viewCount ?? 0) + 1,\n//         likeCount: Number(dynamic?.likeCount) || 0,\n//         isLiked: !!dynamic?.isLiked,\n//       };\n//     });\n\n//     return { data: forumsWithMedia, hasMore: allForums.length === limit };\n//   } catch (error) {\n//     console.error(\"Error searching blogs:\", error);\n//     throw error;\n//   }\n// };\n"],"names":[],"mappings":";;;AAAA;;AAEO,MAAM,eAAe,OAAO,OAAe,QAAgB,EAAE,EAAE,SAAiB,CAAC;IACvF,MAAM,WAAW,MAAM,2HAAA,CAAA,UAAG,CAAC,GAAG,CAAC,CAAC,cAAc,CAAC,EAAE;QAChD,QAAQ;YACP;YACA;YACA;QACD;IACD;IACA,OAAO;QAAE,MAAM,SAAS,IAAI,CAAC,IAAI;QAAE,SAAS,SAAS,IAAI,CAAC,OAAO;IAAC;AACnE,GAEA,6CAA6C;CAC7C,mBAAmB;CACnB,mBAAmB;CACnB,oBAAoB;CACpB,mBAAmB;CACnB,SAAS;CACT,UAAU;CACV,8EAA8E;CAC9E,eAAe;CACf,gBAAgB;CAChB,UAAU;CACV,0EAA0E;CAC1E,+CAA+C;CAC/C,kDAAkD;CAClD,+BAA+B;CAE/B,8BAA8B;CAC9B,sCAAsC;CAEtC,sCAAsC;CACtC,+CAA+C;CAC/C,iDAAiD;CACjD,mDAAmD;CACnD,YAAY;CACZ,QAAQ;CAER,0CAA0C;CAC1C,oCAAoC;CACpC,kCAAkC;CAClC,mCAAmC;CACnC,oBAAoB;CACpB,2BAA2B;CAC3B,mCAAmC;CACnC,iCAAiC;CACjC,6CAA6C;CAC7C,+BAA+B;CAC/B,iCAAiC;CACjC,yCAAyC;CACzC,yCAAyC;CACzC,uCAAuC;CACvC,8CAA8C;CAC9C,2EAA2E;CAC3E,8CAA8C;CAC9C,aAAa;CACb,wBAAwB;CACxB,qEAAqE;CACrE,wDAAwD;CACxD,iDAAiD;CAEjD,iDAAiD;CACjD,yCAAyC;CACzC,yCAAyC;CACzC,gCAAgC;CAChC,4BAA4B;CAC5B,oCAAoC;CACpC,kCAAkC;CAClC,8CAA8C;CAC9C,gCAAgC;CAChC,kCAAkC;CAClC,0CAA0C;CAC1C,0CAA0C;CAC1C,wCAAwC;CACxC,gDAAgD;CAChD,4DAA4D;CAC5D,eAAe;CACf,+CAA+C;CAC/C,0CAA0C;CAC1C,YAAY;CAEZ,gCAAgC;CAChC,gDAAgD;CAChD,mCAAmC;CACnC,qCAAqC;CACrC,gBAAgB;CAChB,YAAY;CACZ,UAAU;CAEV,wCAAwC;CACxC,4CAA4C;CAC5C,yEAAyE;CACzE,qBAAqB;CACrB,cAAc;CACd,UAAU;CACV,QAAQ;CAER,qEAAqE;CACrE,mDAAmD;CACnD,sDAAsD;CACtD,2CAA2C;CAC3C,0EAA0E;CAE1E,wCAAwC;CACxC,mCAAmC;CACnC,kBAAkB;CAClB,yBAAyB;CACzB,uCAAuC;CACvC,4DAA4D;CAC5D,8FAA8F;CAC9F,WAAW;CACX,sBAAsB;CACtB,mBAAmB;CACnB,sBAAsB;CACtB,eAAe;CACf,+CAA+C;CAC/C,kDAAkD;CAClD,YAAY;CACZ,UAAU;CACV,gBAAgB;CAChB,mBAAmB;CACnB,uBAAuB;CACvB,2CAA2C;CAC3C,YAAY;CACZ,UAAU;CACV,iDAAiD;CAEjD,qDAAqD;CACrD,gEAAgE;CAChE,iBAAiB;CACjB,gBAAgB;CAChB,oDAAoD;CACpD,sDAAsD;CACtD,uCAAuC;CACvC,WAAW;CACX,UAAU;CAEV,6EAA6E;CAC7E,sBAAsB;CACtB,sDAAsD;CACtD,mBAAmB;CACnB,MAAM;CACN,KAAK","debugId":null}},
    {"offset": {"line": 1351, "column": 0}, "map": {"version":3,"sources":["file:///Users/raksa/School/Year-2/Next-Gen/KOMPLEX/apps/web/src/components/pages/forums/Sidebar.tsx"],"sourcesContent":["'use client';\n\nimport { Search } from 'lucide-react';\nimport { Plus } from 'lucide-react';\nimport Link from 'next/link';\nimport { useState } from 'react';\n\ninterface SidebarProps {\n    onSearch?: (query: string) => void;\n}\n\nexport default function Sidebar({ onSearch }: SidebarProps) {\n    const [searchTerm, setSearchTerm] = useState('');\n\n    const subjects = ['ទាំងអស់', 'គណិតវិទ្យា', 'រូបវិទ្យា', 'គីមីវិទ្យា', 'ជីវវិទ្យា'];\n    const types = ['ទាំងអស់', 'សំណួរ', 'ចែករំលែក', 'ពិភាក្សា'];\n\n    const handleSearch = (query: string) => {\n        setSearchTerm(query);\n        onSearch?.(query);\n    };\n\n    const handleKeyPress = (e: React.KeyboardEvent<HTMLInputElement>) => {\n        if (e.key === 'Enter') {\n            handleSearch(e.currentTarget.value);\n        }\n    };\n\n    return (\n        <>\n            {/* Mobile/Tablet Secondary Bar */}\n            <div className=\"lg:hidden fixed top-14 left-0 right-0 z-40 bg-white/95 backdrop-blur-md border-b border-indigo-500/10 px-4 py-3\">\n                <div className=\"flex items-center gap-3\">\n                    <div className=\"flex-1\">\n                        <input\n                            type=\"text\"\n                            \n                            placeholder=\"ស្វែងរកការពិភាក្សា...\"\n                            className=\"w-full py-2 px-3 border border-indigo-500/20 rounded-lg text-sm bg-white/80 transition-all duration-300 focus:outline-none focus:border-indigo-600 focus:shadow-lg focus:shadow-indigo-500/10\"\n                            value={searchTerm}\n                            onChange={(e) => setSearchTerm(e.target.value)}\n                            onKeyPress={handleKeyPress}\n                        />\n                    </div>\n                    <Link href={\"/me/create-forum\"} className=\"bg-indigo-600 text-white py-2 px-4 rounded-lg border-none text-sm cursor-pointer transition-all duration-300 hover:bg-indigo-700 flex items-center gap-2\">\n                        <Plus className=\"w-4 h-4\" />\n                    </Link>\n                </div>\n            </div>\n\n\n            {/* Desktop Sidebar */}\n            <div className=\"hidden lg:block w-70 bg-white rounded-2xl p-6 shadow-lg shadow-indigo-500/10 border border-indigo-500/10 h-fit sticky top-20\">\n                <div className=\"mb-6\">\n                    <h1 className=\"text-2xl font-extrabold mb-2 text-indigo-600\">ពិភាក្សា</h1>\n                    <p className=\"text-gray-500 text-sm\">ចែករំលែកចំណេះដឹង និងសួរសំណួររបស់អ្នក</p>\n                </div>\n\n                <Link href={\"/me/create-forum\"} className=\"bg-indigo-600 text-white py-3 px-5 rounded-xl border-none font-semibold text-sm transition-all duration-300 shadow-lg shadow-indigo-500/30 mb-6 flex items-center justify-center gap-2 w-full hover:bg-indigo-700\">\n                    <Plus className='w-4 h-4'></Plus>\n                    បង្កើតការពិភាក្សាថ្មី\n                </Link>\n\n                <div className=\"mb-6\">\n                    <label htmlFor=\"search-input\" className=\"flex font-semibold text-gray-900 mb-2 text-sm items-center gap-2\">\n                        <Search className='w-4 h-4'></Search>\n                        ស្វែងរក\n                    </label>\n                    <input\n                        type=\"text\"\n                        \n                        id=\"search-input\"\n                        className=\"w-full py-3 px-4 border border-indigo-500/20 rounded-xl text-sm bg-white/80 transition-all duration-300 focus:outline-none focus:border-indigo-600 focus:shadow-lg focus:shadow-indigo-500/10\"\n                        placeholder=\"ស្វែងរកការពិភាក្សា...\"\n                        value={searchTerm}\n                        onChange={(e) => setSearchTerm(e.target.value)}\n                        onKeyPress={handleKeyPress}\n                    />\n                </div>\n\n                <div className=\"mb-6 opacity-50\">\n                    <div className=\"font-bold text-gray-400 mb-3 text-sm\">មុខវិជ្ជា</div>\n                    <div className=\"flex flex-col gap-2\">\n                        {subjects.map((subject) => (\n                            <div\n                                key={subject}\n                                className=\"flex items-center gap-2 py-2 px-3 rounded-lg text-sm text-gray-400 cursor-not-allowed\"\n                            >\n                                {subject}\n                            </div>\n                        ))}\n                    </div>\n                </div>\n\n                <div className=\"mb-6 opacity-50\">\n                    <div className=\"font-semibold text-gray-400 mb-3 text-sm\">ប្រភេទ</div>\n                    <div className=\"flex flex-col gap-2\">\n                        {types.map((type) => (\n                            <div\n                                key={type}\n                                className=\"flex items-center gap-2 py-2 px-3 rounded-lg text-sm text-gray-400 cursor-not-allowed\"\n                            >\n                                {type}\n                            </div>\n                        ))}\n                    </div>\n                </div>\n            </div>\n        </>\n    );\n}\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AACA;AALA;;;;;;AAWe,SAAS,QAAQ,EAAE,QAAQ,EAAgB;IACtD,MAAM,CAAC,YAAY,cAAc,GAAG,CAAA,GAAA,oUAAA,CAAA,WAAQ,AAAD,EAAE;IAE7C,MAAM,WAAW;QAAC;QAAW;QAAc;QAAa;QAAc;KAAY;IAClF,MAAM,QAAQ;QAAC;QAAW;QAAS;QAAY;KAAW;IAE1D,MAAM,eAAe,CAAC;QAClB,cAAc;QACd,WAAW;IACf;IAEA,MAAM,iBAAiB,CAAC;QACpB,IAAI,EAAE,GAAG,KAAK,SAAS;YACnB,aAAa,EAAE,aAAa,CAAC,KAAK;QACtC;IACJ;IAEA,qBACI;;0BAEI,6WAAC;gBAAI,WAAU;0BACX,cAAA,6WAAC;oBAAI,WAAU;;sCACX,6WAAC;4BAAI,WAAU;sCACX,cAAA,6WAAC;gCACG,MAAK;gCAEL,aAAY;gCACZ,WAAU;gCACV,OAAO;gCACP,UAAU,CAAC,IAAM,cAAc,EAAE,MAAM,CAAC,KAAK;gCAC7C,YAAY;;;;;;;;;;;sCAGpB,6WAAC,2RAAA,CAAA,UAAI;4BAAC,MAAM;4BAAoB,WAAU;sCACtC,cAAA,6WAAC,sRAAA,CAAA,OAAI;gCAAC,WAAU;;;;;;;;;;;;;;;;;;;;;;0BAO5B,6WAAC;gBAAI,WAAU;;kCACX,6WAAC;wBAAI,WAAU;;0CACX,6WAAC;gCAAG,WAAU;0CAA+C;;;;;;0CAC7D,6WAAC;gCAAE,WAAU;0CAAwB;;;;;;;;;;;;kCAGzC,6WAAC,2RAAA,CAAA,UAAI;wBAAC,MAAM;wBAAoB,WAAU;;0CACtC,6WAAC,sRAAA,CAAA,OAAI;gCAAC,WAAU;;;;;;4BAAiB;;;;;;;kCAIrC,6WAAC;wBAAI,WAAU;;0CACX,6WAAC;gCAAM,SAAQ;gCAAe,WAAU;;kDACpC,6WAAC,0RAAA,CAAA,SAAM;wCAAC,WAAU;;;;;;oCAAmB;;;;;;;0CAGzC,6WAAC;gCACG,MAAK;gCAEL,IAAG;gCACH,WAAU;gCACV,aAAY;gCACZ,OAAO;gCACP,UAAU,CAAC,IAAM,cAAc,EAAE,MAAM,CAAC,KAAK;gCAC7C,YAAY;;;;;;;;;;;;kCAIpB,6WAAC;wBAAI,WAAU;;0CACX,6WAAC;gCAAI,WAAU;0CAAuC;;;;;;0CACtD,6WAAC;gCAAI,WAAU;0CACV,SAAS,GAAG,CAAC,CAAC,wBACX,6WAAC;wCAEG,WAAU;kDAET;uCAHI;;;;;;;;;;;;;;;;kCASrB,6WAAC;wBAAI,WAAU;;0CACX,6WAAC;gCAAI,WAAU;0CAA2C;;;;;;0CAC1D,6WAAC;gCAAI,WAAU;0CACV,MAAM,GAAG,CAAC,CAAC,qBACR,6WAAC;wCAEG,WAAU;kDAET;uCAHI;;;;;;;;;;;;;;;;;;;;;;;;AAWrC","debugId":null}},
    {"offset": {"line": 1604, "column": 0}, "map": {"version":3,"sources":["file:///Users/raksa/School/Year-2/Next-Gen/KOMPLEX/apps/web/src/app/forums/page.tsx"],"sourcesContent":["\"use client\";\n\nimport ForumCard from \"@components/pages/forums/ForumCard\";\nimport ForumSkeleton from \"@components/pages/forums/ForumSkeleton\";\nimport ContentError from \"@components/common/ContentError\";\nimport { useState, useEffect } from \"react\";\nimport { ForumPost } from \"@core-types/content/forums\";\nimport { getAllForums } from \"@core-services/feed/forums\";\nimport { searchForums } from \"@core-services/feed/search/forums\";\nimport { toggleForumLike } from \"@core-services/me/forums\";\nimport Sidebar from \"@components/pages/forums/Sidebar\";\n\nexport default function Forum() {\n\tconst [searchQuery, setSearchQuery] = useState(\"\");\n\tconst [forumPosts, setForumPosts] = useState<ForumPost[]>([]);\n\tconst [loading, setLoading] = useState(true);\n\tconst [isSearching, setIsSearching] = useState(false);\n\tconst [error, setError] = useState<string | null>(null);\n\tconst [match, setMatch] = useState(true);\n\tconst fetchForumPosts = async () => {\n\t\ttry {\n\t\t\tsetLoading(true);\n\t\t\tsetError(null);\n\t\t\tconst { forums } = await getAllForums();\n\t\t\tif (forums.length > 0) {\n\t\t\t\tsetForumPosts(forums);\n\t\t\t} else {\n\t\t\t\tsetError(\"រកមិនឃើញអត្ថបទ\");\n\t\t\t}\n\t\t} catch (err) {\n\t\t\tconsole.error(\"Error fetching forum posts:\", err);\n\t\t\tsetError(\"មានបញ្ហាក្នុងការទាញយកទិន្នន័យ។ សូមព្យាយាមម្តងទៀត។\");\n\t\t} finally {\n\t\t\tsetLoading(false);\n\t\t}\n\t};\n\n\tconst handleSearch = async (query: string) => {\n\t\tsetSearchQuery(query);\n\n\t\tif (query.trim() === \"\") {\n\t\t\t// If search is empty, fetch all forums\n\t\t\tfetchForumPosts();\n\t\t\treturn;\n\t\t}\n\n\t\ttry {\n\t\t\tsetIsSearching(true);\n\t\t\tsetError(null);\n\t\t\tconst searchResults = await searchForums(query, 50, 0);\n\n\t\t\tif (searchResults.data.length === 0) {\n\t\t\t\tsetError(\"រកមិនឃើញអត្ថបទ\");\n\t\t\t\tsetForumPosts([]);\n\t\t\t} else {\n\t\t\t\tsetMatch(searchResults.isMatch);\n\t\t\t\tsetForumPosts(searchResults.data);\n\t\t\t}\n\t\t} catch {\n\t\t\tsetError(\"មានបញ្ហាក្នុងការស្វែងរកអត្ថបទ\");\n\t\t} finally {\n\t\t\tsetIsSearching(false);\n\t\t}\n\t};\n\n\tuseEffect(() => {\n\t\tfetchForumPosts();\n\t}, []);\n\n\tconst handleLikeClick = async (postId: number, isLiked: boolean) => {\n\t\ttry {\n\t\t\tawait toggleForumLike(postId.toString(), isLiked);\n\t\t\tsetForumPosts((prev) =>\n\t\t\t\tprev.map((post) =>\n\t\t\t\t\tpost.id === postId\n\t\t\t\t\t\t? { ...post, likeCount: isLiked ? post.likeCount - 1 : post.likeCount + 1, isLiked: !isLiked }\n\t\t\t\t\t\t: post\n\t\t\t\t)\n\t\t\t);\n\t\t} catch (error) {\n\t\t\tconsole.error(\"Error liking post:\", error);\n\t\t}\n\t};\n\n\t// Use forum posts directly since search filtering is handled by the backend\n\tconst filteredPosts = forumPosts;\n\n\t// Early returns for loading and error states\n\tif (loading || isSearching) {\n\t\treturn (\n\t\t\t<div className=\"min-h-screen bg-gray-50\">\n\t\t\t\t{/* Main Content */}\n\t\t\t\t<div className=\"lg:pt-20 pt-36 p-5 max-w-7xl mx-auto\">\n\t\t\t\t\t<div className=\"flex gap-6\">\n\t\t\t\t\t\t<Sidebar onSearch={handleSearch} />\n\t\t\t\t\t\t{/* Main Content Area */}\n\t\t\t\t\t\t<div className=\"flex-1\">\n\t\t\t\t\t\t\t<ForumSkeleton count={6} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n\n\tif (error) {\n\t\treturn (\n\t\t\t<div className=\"min-h-screen bg-gray-50\">\n\t\t\t\t{/* Main Content */}\n\t\t\t\t<div className=\"pt-36 lg:pt-20 p-5 max-w-7xl mx-auto\">\n\t\t\t\t\t<div className=\"flex gap-6\">\n\t\t\t\t\t\t<Sidebar onSearch={handleSearch} />\n\t\t\t\t\t\t{/* Main Content Area */}\n\t\t\t\t\t\t<div className=\"flex-1\">\n\t\t\t\t\t\t\t<ContentError type={error === \"រកមិនឃើញអត្ថបទ\" ? \"no-results\" : \"error\"} message={error} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n\n\treturn (\n\t\t<div className=\"min-h-screen bg-gray-50\">\n\t\t\t{/* Secondary Header - Commented Out */}\n\t\t\t{/* \n            <div className=\"fixed w-full top-14 z-40 bg-white/95 backdrop-blur-md border-b border-indigo-500/10\">\n                <div className=\"mx-auto px-6 py-2\">\n                    <div className=\"flex items-center justify-between gap-6\">\n                        <div className=\"flex items-center gap-4 flex-1\">\n                            <div className=\"relative flex-1 max-w-md\">\n                                <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400\" size={20} />\n                                <input\n                                    type=\"text\"\n                                    placeholder=\"ស្វែងរកវេទិកា...\"\n                                    value={searchQuery}\n                                    onChange={(e) => setSearchQuery(e.target.value)}\n                                    className=\"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-colors\"\n                                />\n                            </div>\n                            <div className=\"relative\">\n                                <Listbox>\n                                    <Listbox.Button className=\"flex items-center gap-2 px-3 py-2 bg-gray-50 hover:bg-gray-100 border border-gray-300 rounded-xl transition-colors focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent\">\n                                        <Filter className=\"text-gray-600\" size={18} />\n                                        {selectedCategories.length > 0 && (\n                                            <span className=\"ml-1 px-2 py-0.5 bg-indigo-100 text-indigo-700 text-xs rounded-full\">\n                                                {selectedCategories.length}\n                                            </span>\n                                        )}\n                                    </Listbox.Button>\n                                    <Transition\n                                        enter=\"transition duration-100 ease-out\"\n                                        enterFrom=\"transform scale-95 opacity-0\"\n                                        enterTo=\"transform scale-100 opacity-100\"\n                                        leave=\"transition duration-75 ease-out\"\n                                        leaveFrom=\"transform scale-100 opacity-100\"\n                                        leaveTo=\"transform scale-95 opacity-0\"\n                                    >\n                                        <Listbox.Options className=\"absolute top-full left-0 mt-2 w-80 bg-white rounded-xl border border-gray-200 shadow-lg backdrop-blur-sm z-50 p-3\">\n                                            <div className=\"space-y-4\">\n                                                <div className=\"flex items-center justify-between\">\n                                                    {selectedCategories.length > 0 && (\n                                                        <button\n                                                            onClick={clearFilters}\n                                                            className=\"text-sm text-indigo-600 hover:text-indigo-700 font-medium\"\n                                                        >\n                                                            លុបច្រោះ\n                                                        </button>\n                                                    )}\n                                                </div>\n                                                <div>\n                                                    <h4 className=\"text-sm font-medium text-gray-700 mb-2\">ប្រភេទ</h4>\n                                                    <div className=\"flex flex-wrap gap-2\">\n                                                        {categories.map((category) => (\n                                                            <button\n                                                                key={category}\n                                                                onClick={() => toggleCategory(category)}\n                                                                className={`px-2 py-1 text-sm rounded-lg transition-all duration-200 font-medium ${selectedCategories.includes(category)\n                                                                    ? 'text-indigo-600 bg-indigo-100 border border-indigo-200'\n                                                                    : 'text-gray-600 bg-gray-100 hover:bg-gray-200 border border-transparent'\n                                                                    }`}\n                                                            >\n                                                                {category}\n                                                            </button>\n                                                        ))}\n                                                    </div>\n                                                </div>\n                                            </div>\n                                        </Listbox.Options>\n                                    </Transition>\n                                </Listbox>\n                            </div>\n                        </div>\n                        <div className=\"flex items-center gap-3\">\n                            <Link\n                                href=\"/my-content/createForum\"\n                                className=\"flex items-center gap-2 px-3 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-xl font-medium transition-colors\"\n                            >\n                                <Plus className=\"w-4 h-4\" />\n                                <span className='hidden lg:block'>បង្កើតអត្ថបទថ្មី</span>\n                            </Link>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            */}\n\n\t\t\t{/* Main Content */}\n\t\t\t<div className=\"pt-36 lg:pt-20 p-5 max-w-7xl mx-auto\">\n\t\t\t\t<div className=\"flex gap-6\">\n\t\t\t\t\t{/* Sidebar */}\n\t\t\t\t\t<Sidebar onSearch={handleSearch} />\n\n\t\t\t\t\t{/* Main Content Area */}\n\t\t\t\t\t<div className=\"flex-1\">\n\t\t\t\t\t\t{/* Search Results Header */}\n\t\t\t\t\t\t{searchQuery && (\n\t\t\t\t\t\t\t<div className=\"mb-6\">\n\t\t\t\t\t\t\t\t<p className={`text-lg font-semibold ${match ? \"text-gray-700\" : \"text-red-600\"}`}>\n\t\t\t\t\t\t\t\t\t{match ? \"លទ្ធផលស្វែងរក\" : \"គ្មានលទ្ធផល\"}: &ldquo;{searchQuery}&rdquo;\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t{/* Forum Posts List */}\n\t\t\t\t\t\t<div className=\"flex flex-col gap-5\">\n\t\t\t\t\t\t\t{filteredPosts.length > 0 ? (\n\t\t\t\t\t\t\t\tfilteredPosts.map((post) => (\n\t\t\t\t\t\t\t\t\t<ForumCard\n\t\t\t\t\t\t\t\t\t\tkey={post.id}\n\t\t\t\t\t\t\t\t\t\tpost={post}\n\t\t\t\t\t\t\t\t\t\tisFromBasePage={true}\n\t\t\t\t\t\t\t\t\t\tonLikeClick={() => handleLikeClick(post.id, post.isLiked)}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t))\n\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t<ContentError type=\"no-results\" message=\"រកមិនឃើញអត្ថបទ\" />\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}